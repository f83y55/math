<!DOCTYPE html>
<html lang="fr">

<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="../../../s.js" data-import="prism"></script>
    <style>
        div.corr {
            width: initial;
            height: initial;
        }
    </style>
</head>

<body onload="body()">
    <!--Corrigé : 
    ->
        <style>
            h1::after {content: " - corrigé";}
            @media print {
                div, table {font-size: smaller;}
                .corr {display:inline-block;}
                .quadrillage5mm {display:none}
                .pagebreak {break-after: auto;}
            }
        </style>
    <!- -->
    <style>.barm {display: inline;}</style>
    <h1>DS NSI : architecture réseau et bases de données : SQL</h1>
    <div class="quadrillage5mm background-print" style="min-height:4.5cm;">&nbsp;&nbsp;<strong>Prénom NOM classe :
        </strong></div>

    <h2 class="nocounter"> Exercice 1 : Architecture réseau </h2>
    <p>
        Les parties A et B sont indépendantes.
    </p>
    <h3 class="nocounter"> Partie A (5 points)</h3>
    <div class="none">
        <figure>
            <img src="assets/fig1.png" alt="fig1">
        </figure>
        <ul>
            <li><span class="barm">(1 pt)</span>
                Donner l’identifiant (adresse) réseau de la machine A et celui de la machine F.
                <div class="quadrillage5mm background-print" style="min-height:3cm;"></div>
                <div class="corr">
                    Adresse du réseau de la machine A : <code>172.16.0.0</code>.<br />
                    Adresse du réseau de la machine F : <code>10.0.0.0</code>.
                </div>
            </li>
            <li><span class="barm">(2 pts)</span>
                Un utilisateur signale que sa machine ne parvient pas à communiquer avec les autres machines de son
                réseau.<br />
                De quelle machine s'agit-il ? Proposer une solution qui peut être mise en place par l'ingénieur réseau.
                <div class="quadrillage5mm background-print" style="min-height:4cm;"></div>
                <div class="corr">
                    Il s'agit de la machine J, dont l'identifiant réseau est <code>8.0.0.0</code> et pas
                    <code>10.0.0.0</code>. <br />
                    L'ingénieur réseau peut lui affecter l'adresse <code>10.10.0.6</code> (d'autres adresses sont
                    possibles).
                </div>
            </li>
            <li><span class="barm">(2 pt)</span>
                Donner le nombre d’hôtes (machines) pouvant être adressés, au maximum, sur le réseau 1. Justifier le
                calcul.
                <div class="quadrillage5mm background-print" style="min-height:4cm;"></div>
                <div class="corr">
                    256²-2 = 65 534 (de 0 à 255, on a 256 valeurs ; 2 choix de 256 valeurs : 256² ; on retire l'adresse
                    réseau et
                    broadcast : -2).
                </div>
            </li>
        </ul>
    </div>
    <h3 class="nocounter"> Partie B (10 points)</h3>
    <div class="none">
        <ol>
            <li>
                Un réseau local est relié à internet à l'aide d'une box faisant office de routeur. Un
                utilisateur connecte un nouvel ordinateur à ce réseau et veut tester son
                fonctionnement.<br />
                Il utilise en premier la commande linux <code>ifconfig</code> qui correspond à <code>ipconfig</code>
                sous environnement Windows. Cela lui donne le résultat suivant :
                
<pre class="lang-bash"><code>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500
    inet 10.0.2.15 netmask 255.255.255.0 broadcast 10.0.2.255
    inet6 fe80::761a:3e85:cc97:6491 prefixlen 64 scopeid 0x20&lt;link&gt;
    ether 08:00:27:8b:c3:91 txqueuelen 1000 (Ethernet)
    RX packets 136 bytes 13703 (13.3 KiB)
    RX errors 0 dropped 0 overruns 0 frame 0
    TX packets 180 bytes 17472 (17.0 KiB)
    TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0
    device interrupt 9 base 0xd020</code></pre>

                <ol type="a">
                    <li><span class="barm">(2 pts)</span>
                        Extraire les informations et les écrire ci-dessous :
                        <div class="quadrillage5mm background-print"
                            style="min-height:3cm;font-size:taller;line-height: 5mm;">
                            <ul>
                                <li>Adresse IPv4 de l'ordinateur : </li>
                                <li>Adresse IPv6 de l'ordinateur : </li>
                                <li>Masque de sous-réseau : </li>
                                <li>Adresse de diffusion (broadcast) du réseau : </li>
                                <li>Adresse MAC de l'interface réseau l'ordinateur : </li>
                            </ul>
                        </div>
                        <div class="corr">
                            <ul>
                                <li>Adresse IPv4 de l'ordinateur : <code>10.0.2.15</code> </li>
                                <li>Masque de sous-réseau : <code>255.255.255.0 </code></li>
                                <li>Adresse IPv6 de l'ordinateur : <code>fe80::761a:3e85:cc97:6491 </code></li>
                                <li>Adresse de diffusion (broadcast) du réseau : <code>10.0.2.255</code></li>
                                <li>Adresse MAC de l'interface réseau l'ordinateur : <code>08:00:27:8b:c3:91</code></li>
                            </ul>
                        </div>
                    </li>
                    <li><span class="barm">(2 pt)</span>
                        Pour tester sa connection internet, l'utilisateur fait alors un <code>traceroute</code> vers un
                        site distant.<br />
                        La première ligne sortie est la ligne suivante :
                        <div style="text-align: center;">
                            <code>1 _gateway (10.0.2.2) 0.328 ms 0.275 ms 0.267 ms</code>
                        </div>
                        Quel nom précis porte le matériel correspondant l'adresse <code>10.0.2.2</code> ? Fait-il partie
                        du même sous-réseau que l'utilisateur (pas de justification demandée) ?
                        <div class="quadrillage5mm background-print" style="min-height:3cm;"></div>
                        <div class="corr">
                            Il s'agit de la <strong>passerelle</strong> (gateway), 1er routeur permettant un accès vers
                            l'extérieur. Oui, une de ses interfaces est dans le même sous-réseau que le poste de
                            l'utilisateur.
                        </div>
                    </li>
                </ol>
            </li>
            <li>Cinq routeurs R1, R2, R3, R4, R5 sont connectés dans un réseau avec les caractéristiques suivantes :
                <div
                    style="display: flex; flex-direction: row; flex-wrap: wrap;align-content: space-between; align-items: center;">
                    <table class="mytable" style="margin: 5mm;">
                        <caption>
                            Routeur R1
                        </caption>
                        <thead>
                            <tr class="table_row_tr_0">
                                <th class="table_row_0 table_column_1">
                                    Destination
                                </th>
                                <th class="table_row_0 table_column_2">
                                    Direction
                                </th>
                                <th class="table_row_0 table_column_3">
                                    Saut
                                </th>
                                <th class="table_row_0 table_column_4">
                                    Débit (Mbits/s)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table_row_tr_1">
                                <td class="table_row_1 table_column_1">
                                    R2
                                </td>
                                <td class="table_row_1 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_1 table_column_3">
                                    1
                                </td>
                                <td class="table_row_1 table_column_4">
                                    10
                                </td>
                            </tr>
                            <tr class="table_row_tr_2">
                                <td class="table_row_2 table_column_1">
                                    R3
                                </td>
                                <td class="table_row_2 table_column_2">
                                    R3
                                </td>
                                <td class="table_row_2 table_column_3">
                                    1
                                </td>
                                <td class="table_row_2 table_column_4">
                                    100
                                </td>
                            </tr>
                            <tr class="table_row_tr_3">
                                <td class="table_row_3 table_column_1">
                                    R4
                                </td>
                                <td class="table_row_3 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_3 table_column_3">
                                    2
                                </td>
                                <td class="table_row_3 table_column_4">

                                </td>
                            </tr>
                            <tr class="table_row_tr_4">
                                <td class="table_row_4 table_column_1">
                                    R5
                                </td>
                                <td class="table_row_4 table_column_2">
                                    R5
                                </td>
                                <td class="table_row_4 table_column_3">
                                    1
                                </td>
                                <td class="table_row_4 table_column_4">
                                    10
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="mytable" style="margin: 5mm;">
                        <caption>
                            Routeur R2
                        </caption>
                        <thead>
                            <tr class="table_row_tr_0">
                                <th class="table_row_0 table_column_1">
                                    Destination
                                </th>
                                <th class="table_row_0 table_column_2">
                                    Direction
                                </th>
                                <th class="table_row_0 table_column_3">
                                    Saut
                                </th>
                                <th class="table_row_0 table_column_4">
                                    Débit (Mbits/s)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table_row_tr_1">
                                <td class="table_row_1 table_column_1">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_3">
                                    1
                                </td>
                                <td class="table_row_1 table_column_4">
                                    10
                                </td>
                            </tr>
                            <tr class="table_row_tr_2">
                                <td class="table_row_2 table_column_1">
                                    R3
                                </td>
                                <td class="table_row_2 table_column_2">
                                    R3
                                </td>
                                <td class="table_row_2 table_column_3">
                                    1
                                </td>
                                <td class="table_row_2 table_column_4">
                                    100
                                </td>
                            </tr>
                            <tr class="table_row_tr_3">
                                <td class="table_row_3 table_column_1">
                                    R4
                                </td>
                                <td class="table_row_3 table_column_2">
                                    R4
                                </td>
                                <td class="table_row_3 table_column_3">
                                    1
                                </td>
                                <td class="table_row_3 table_column_4">
                                    10
                                </td>
                            </tr>
                            <tr class="table_row_tr_4">
                                <td class="table_row_4 table_column_1">
                                    R5
                                </td>
                                <td class="table_row_4 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_4 table_column_3">
                                    2
                                </td>
                                <td class="table_row_4 table_column_4">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="mytable" style="margin: 5mm;">
                        <caption>
                            Routeur R3
                        </caption>
                        <thead>
                            <tr class="table_row_tr_0">
                                <th class="table_row_0 table_column_1">
                                    Destination
                                </th>
                                <th class="table_row_0 table_column_2">
                                    Direction
                                </th>
                                <th class="table_row_0 table_column_3">
                                    Saut
                                </th>
                                <th class="table_row_0 table_column_4">
                                    Débit (Mbits/s)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table_row_tr_1">
                                <td class="table_row_1 table_column_1">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_3">
                                    1
                                </td>
                                <td class="table_row_1 table_column_4">
                                    100
                                </td>
                            </tr>
                            <tr class="table_row_tr_2">
                                <td class="table_row_2 table_column_1">
                                    R2
                                </td>
                                <td class="table_row_2 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_2 table_column_3">
                                    1
                                </td>
                                <td class="table_row_2 table_column_4">
                                    100
                                </td>
                            </tr>
                            <tr class="table_row_tr_3">
                                <td class="table_row_3 table_column_1">
                                    R4
                                </td>
                                <td class="table_row_3 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_3 table_column_3">
                                    2
                                </td>
                                <td class="table_row_3 table_column_4">

                                </td>
                            </tr>
                            <tr class="table_row_tr_4">
                                <td class="table_row_4 table_column_1">
                                    R5
                                </td>
                                <td class="table_row_4 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_4 table_column_3">
                                    2
                                </td>
                                <td class="table_row_4 table_column_4">
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="mytable" style="margin: 5mm;">
                        <caption>
                            Routeur R4
                        </caption>
                        <thead>
                            <tr class="table_row_tr_0">
                                <th class="table_row_0 table_column_1">
                                    Destination
                                </th>
                                <th class="table_row_0 table_column_2">
                                    Direction
                                </th>
                                <th class="table_row_0 table_column_3">
                                    Saut
                                </th>
                                <th class="table_row_0 table_column_4">
                                    Débit (Mbits/s)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table_row_tr_1">
                                <td class="table_row_1 table_column_1">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_1 table_column_3">
                                    2
                                </td>
                                <td class="table_row_1 table_column_4">

                                </td>
                            </tr>
                            <tr class="table_row_tr_2">
                                <td class="table_row_2 table_column_1">
                                    R2
                                </td>
                                <td class="table_row_2 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_2 table_column_3">
                                    1
                                </td>
                                <td class="table_row_2 table_column_4">
                                    10
                                </td>
                            </tr>
                            <tr class="table_row_tr_3">
                                <td class="table_row_3 table_column_1">
                                    R3
                                </td>
                                <td class="table_row_3 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_3 table_column_3">
                                    2
                                </td>
                                <td class="table_row_3 table_column_4">

                                </td>
                            </tr>
                            <tr class="table_row_tr_4">
                                <td class="table_row_4 table_column_1">
                                    R5
                                </td>
                                <td class="table_row_4 table_column_2">
                                    R2
                                </td>
                                <td class="table_row_4 table_column_3">
                                    3
                                </td>
                                <td class="table_row_4 table_column_4">

                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="mytable" style="margin: 5mm;">
                        <caption>
                            Routeur R5
                        </caption>
                        <thead>
                            <tr class="table_row_tr_0">
                                <th class="table_row_0 table_column_1">
                                    Destination
                                </th>
                                <th class="table_row_0 table_column_2">
                                    Direction
                                </th>
                                <th class="table_row_0 table_column_3">
                                    Saut
                                </th>
                                <th class="table_row_0 table_column_4">
                                    Débit (Mbits/s)
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table_row_tr_1">
                                <td class="table_row_1 table_column_1">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_1 table_column_3">
                                    1
                                </td>
                                <td class="table_row_1 table_column_4">
                                    10
                                </td>
                            </tr>
                            <tr class="table_row_tr_2">
                                <td class="table_row_2 table_column_1">
                                    R2
                                </td>
                                <td class="table_row_2 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_2 table_column_3">
                                    2
                                </td>
                                <td class="table_row_2 table_column_4">

                                </td>
                            </tr>
                            <tr class="table_row_tr_3">
                                <td class="table_row_3 table_column_1">
                                    R3
                                </td>
                                <td class="table_row_3 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_3 table_column_3">
                                    2
                                </td>
                                <td class="table_row_3 table_column_4">

                                </td>
                            </tr>
                            <tr class="table_row_tr_4">
                                <td class="table_row_4 table_column_1">
                                    R4
                                </td>
                                <td class="table_row_4 table_column_2">
                                    R1
                                </td>
                                <td class="table_row_4 table_column_3">
                                    3
                                </td>
                                <td class="table_row_4 table_column_4">
                                </td>
                            </tr>
                        </tbody>
                    </table>


                </div>
                Dans cette question, on utilise le protocole de routage RIP, qui cherche à minimiser le nombre de sauts.
                <ol type="a">
                    <li><span class="barm">(2 pts)</span>
                        Compléter le schéma ci-dessous qui représente le réseau :
                        indiquer les numéros des routeurs et tracer les connexions
                        entre eux.
                        <div class="quadrillage5mm background-print" style="min-height:5cm;font-size: taller;">
                            <table>
                                <tr>
                                    <td style="margin: 1cm;padding-right: 5cm;"></td>
                                    <td style="margin: 1cm;padding-right: 5cm;">R...</td>
                                    <td style="margin: 1cm;">R5</td>
                                </tr>
                                <tr>
                                    <td style="margin: 1cm;padding-left: 2cm;">R...</td>
                                    <td style="margin: 1cm;"></td>
                                    <td style="margin: 1cm;"></td>
                                </tr>
                                <tr>
                                    <td style="margin: 1cm;"></td>
                                    <td style="margin: 1cm;">R...</td>
                                    <td style="margin: 1cm;">R4</td>
                                </tr>
                            </table>
                        </div>
                        <div class="corr">
                            <table>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td>R1</td>
                                    <td>-</td>
                                    <td>R5</td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>/</td>
                                    <td>|</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>R3</td>
                                    <td></td>
                                    <td>|</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>\</td>
                                    <td>|</td>
                                    <td></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td></td>
                                    <td>R2</td>
                                    <td>-</td>
                                    <td>R4</td>
                                </tr>
                            </table>
                        </div>
                    </li>
                    <li><span class="barm">(2 pts)</span>
                        Quelle route faut-il prendre pour aller de R4 à R5 ?
                        <div class="quadrillage5mm background-print" style="min-height:2cm;"></div>
                        <div class="corr">
                            R4 → R2 → R1 → R5
                        </div>
                    </li>
                </ol>
            </li>
            <li><span class="barm">(2 pts)</span>
                Les cinq routeurs précédents sont connectés dans la même configuration que précédemment. Toutefois le
                protocole de routage appliqué est désormais le protocole OSPF qui prend en compte le débit (Mbits/s)
                pour minimiser le coût total de la transmission. <br />
                Le coût \(C\) pour passer d’un routeur à un autre est
                donné par la formule : \(C=\dfrac{100}{\textrm{débit}}\) <br />
                Quelle route faut-il prendre pour aller de R4 à R5 en respectant le protocole OSPF ?
                <div class="quadrillage5mm background-print" style="min-height:4cm;"></div>
                <div class="corr">
                    Le chemin doit minimiser le coût total, on a donc la route :
                    R4 → R2 → R3 → R1 → R5 (coût = 22).
                </div>
            </li>
        </ol>
    </div>

    <h2 class="nocounter">Exercice 2 : Bases de données et language SQL (15 points)</h2>
    <div class=" none">
        <p>
            <i>
                Cet exercice traite du thème « base de données », et principalement du modèle
                relationnel et du langage
                SQL.
            </i>
        </p>
        <p>
            L’énoncé de cet exercice peut utiliser les mots du langage SQL suivants :
            <code>CREATE TABLE</code>,
            <code>SELECT</code>,
            <code>FROM</code>,
            <code>WHERE</code>,
            <code>JOIN ON</code>,
            <code>INSERT INTO</code>,
            <code>VALUES</code>,
            <code>UPDATE</code>,
            <code>SET</code>,
            <code>DELETE</code>,
            <code>COUNT</code>,
            <code>DISTINCT</code>,
            <code>AND</code>,
            <code>OR</code>,
            <code>AS</code>,
            <code>ORDER BY</code>,
            <code>ASC</code>,
            <code>DESC</code>
    </div>
    </div>
    <div class="none">
        Un site web recueille des données de navigation dans une base de données afin d'étudier les profils de ses
        visiteurs.
        Chaque requête d'interrogation d'une page de ce site est enregistrée dans une première table dénommée
        <code>Visites</code>
        sous la forme d'un 5-uplet :
        <div style="text-align: center;">
            <code>
                (identifiant, adresse IP, date et heure de visite, nom de la page, navigateur)
            </code>
            Lorsqu'un client change de page sur le site, un nouvel identifiant lui est attribué (il restera reconnu par
            son adresse ip).
        </div>

        Le chargement de la page <code>index.html</code> par <code>192.168.1.91</code> le 12 juillet 2023 à 22h48 aura
        par exemple été enregistré de la façon suivante :
        <div style="text-align: center;">
            <code>
                (1534, "192.168.1.91", "2023-07-12 22:48:00", "index.html", "Internet
                explorer 10").
            </code>
        </div>
        <ol>
            <li>
                Le script SQL ayant permis de créer cette table est le suivant :
                
<pre class="language-sql"><code>CREATE TABLE Visites (
    identifiant INTEGER NOT NULL UNIQUE,
    ip VARCHAR(15),
    dateheure DATETIME,
    nompage TEXT,
    navigateur TEXT
);</code></pre>

                <ol type="a">
                    <li><span class="barm">(1 pt)</span>
                        Donner une commande d'interrogation en langage SQL permettant d'obtenir
                        l'ensemble, dans cette table, des 2-uplets : <code>adresse IP, nom de la page</code>
                        <div class="quadrillage5mm background-print" style="min-height:2cm;"></div>
                        <div class="corr">
                            <code>
                                SELECT ip, nompage FROM Visites;
                            </code>
                        </div>
                    </li>
                    <li><span class="barm">(1 pt)</span>
                        Donner une commande en langage SQL permettant d'obtenir l'ensemble des
                        adresses IP ayant interrogé le site, sans doublon.
                        <div class="quadrillage5mm background-print" style="min-height:2cm;"></div>
                        <div class="corr">
                            <code>
                                SELECT <strong>DISTINCT</strong> ip FROM Visites;
                            </code>
                        </div>
                    </li>
                    <li><span class="barm">(1 pt)</span>
                        Donner une commande en langage SQL permettant d'obtenir la liste des
                        noms des pages visitées par l'adresse IP <code>192.168.1.91</code> .
                        <div class="quadrillage5mm background-print" style="min-height:3cm;"></div>
                        <div class="corr">
                            <code>
                                SELECT nompage FROM Visites <strong>WHERE ip='192.168.1.91'</strong>;
                            </code>
                        </div>
                    </li>
                </ol>
            </li>
            <li>
                <p>
                    Ce site web met en place, sur chacune de ses pages, un programme en javascript qui
                    envoie au serveur, à intervalle régulier de 15 secondes, le temps en secondes de
                    présence sur la page.<br />
                    Ces envois contiennent tous la valeur de identifiant
                    correspondant au chargement initial de la page.<br />
                    Par exemple, si le visiteur du 12 juillet 1998 est resté 65 secondes sur la page, celle-ci a
                    envoyé au serveur les 4 doublets <code>(1534, 15)</code>, <code>(1534, 30)</code>, <code>(1534,
                        45)</code> et <code>(1534, 60)</code>.
                </p>
                <p>
                    Ces données sont enregistrées dans une table nommée <code>Pings</code> créée avec la commande
                    ci-dessous :
                </p>
                 
<pre class="language-sql"><code>CREATE TABLE Pings (
    identifiant INTEGER,
    duree INTEGER
    FOREIGN KEY (identifiant) REFERENCES Visites(identifiant)
);</code></pre>

                <p>
                    En plus de l'inscription d'une ligne dans la table <code>Visites</code>, chaque chargement d'une
                    nouvelle page provoque l'insertion d'une ligne dans la table <code>Pings</code> comprenant
                    l'identifiant de ce chargement et une durée de 0.<br />
                    Les attributs identifiant des tables <code>Visites</code> et <code>Pings</code> partagent les mêmes
                    valeurs.
                </p>
                <ol type="a">
                    <li><span class="barm">(1 pt)</span>
                        De quelle table l’attribut identifiant est-il la clé primaire ?
                        <div class="quadrillage5mm background-print" style="min-height:2cm;"></div>
                        <div class="corr">
                            L’attribut <code>identifiant</code> est la clé primaire de la table <code>Visites</code> (un
                            nouvel identifiant est fourni si le client change de page, d'après l'énoncé).
                        </div>
                    </li>
                    <li><span class="barm">(1 pt)</span>
                        De quelle table l’attribut identifiant est-il une clé étrangère ?
                        <div class="quadrillage5mm background-print" style="min-height:2cm;"></div>
                        <div class="corr">
                            L’attribut <code>identifiant</code> est la clé étrangère de la table <code>Pings</code>.
                        </div>
                    </li>
                    <li><span class="barm">(2 pts)</span>
                        Par conséquent, quelles vérifications, concernant ces contraintes (clé primaire et clé
                        étrangère), sont automatiquement effectuées par le système de gestion
                        de base de données ?
                        <div class="quadrillage5mm background-print" style="min-height:5cm;"></div>
                        <div class="corr">
                            Le SGBD va vérifier que l’attribut <code>identifiant</code> est unique pour chaque p-uplet
                            de la table <code>Visites</code>. Le SGBD va aussi vérifier que l’attribut identifiant de la
                            table <code>Pings</code> correspond bien à un attribut identifiant de la table
                            <code>Visites</code> pour
                            chaque p-uplet de la table <code>Pings</code>.
                        </div>
                    </li>
                </ol>
            </li>
            <li><span class="barm">(2 pts)</span>
                Le serveur reçoit le doublet <code>(identifiant, duree)</code> suivant : <code>(1534, 105)</code>.<br />
                Écrire la commande SQL d'insertion qui permet d'ajouter cet enregistrement à la
                table Pings.
                <div class="quadrillage5mm background-print" style="min-height:3cm;"></div>
                <div class="corr">
                    
<pre class="language-sql"><code>INSERT INTO Pings(identifiant, duree)
VALUES (1534, 105);</code></pre>

                </div>
            </li>
            <li>
                On envisage ensuite d'optimiser la table en se contentant d'une seule ligne par
                identifiant dans la table <code>Pings</code> : les valeurs de l'attribut <code>duree</code> devraient
                alors être mises à jour (<code>UPDATE</code>) à chaque réception d'un nouveau doublet
                <code>(identifiant, duree)</code>.
                <ol type="a">
                    <li><span class="barm">(2 pts)</span>
                        Écrire la requête de mise à jour permettant de fixer à <code>120</code> la valeur de l'attribut
                        <code>duree</code> associée à l'identifiant <code>1534</code> dans la table <code>Pings</code>.
                        <div class="quadrillage5mm background-print" style="min-height:4cm;"></div>
                        <div class="corr">
                            
<pre class="language-sql"><code>UPDATE Pings
SET duree = 120
WHERE identifiant = 1534;</code></pre>

                        </div>
                    </li>
                    <li><span class="barm">(2 pts)</span>
                        Lorsque les données envoyées depuis le navigateur d'un client, via plusieurs requêtes formulées en javascript, arrivent au serveur, elles ne sont pas forcément dans l'ordre. Expliquer quel problème cela peut générer de se contenter de mettre à jour une seule ligne par identifiant dans la table <code>Pings</code> en utilisant <code>UPDATE</code>. 
                        <div class="quadrillage5mm background-print" style="min-height:4cm;"></div>
                        <div class="corr">
                            Si le message annonçant 15 secondes de connexion à une nouvelle page arrive avant le message
                            de connexion initiale à cette page (le seul qui crée une entrée), le serveur peut demander
                            au SGBD de modifier une entrée alors qu'elle n'est pas encore créée.<br />
                            Avec une durée de 15s, ce type d'incident serait rare mais pas impossible.
                        </div>
                    </li>
                </ol>
            </li>
            <li><span class="barm">(2 pts)</span>
                Écrire une requête SQL utilisant le mot-clef <code>JOIN</code> et une clause <code>WHERE</code>,
                permettant de trouver les noms de toutes les pages qui ont été consultées plus d'une minute par au moins
                un utilisateur.
                <div class="quadrillage5mm background-print" style="min-height:5cm;"></div>
                <div class="corr">
                    
<pre class="language-sql"><code>SELECT nompage
FROM Visites
JOIN Pings ON Visites.identifiant = Pings.identifiant
WHERE Pings.duree &gt; 60;</code></pre>

                </div>
            </li>
        </ol>

        </li>
        </ol>
</body>

</html>
